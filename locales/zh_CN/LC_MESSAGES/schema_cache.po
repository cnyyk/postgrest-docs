# SOME DESCRIPTIVE TITLE.
# Copyright (C) 2017, Joe Nelson, Steve Chavez
# This file is distributed under the same license as the PostgREST package.
# FIRST AUTHOR <EMAIL@ADDRESS>, 2022.
#
msgid ""
msgstr ""
"Project-Id-Version: PostgREST 9.0\n"
"Report-Msgid-Bugs-To: \n"
"POT-Creation-Date: 2022-03-13 08:59+0800\n"
"PO-Revision-Date: 2022-03-14 23:44+0800\n"
"Last-Translator: YCH <chnyyk@gmail.com>\n"
"Language-Team: \n"
"Language: zh_CN\n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=utf-8\n"
"Content-Transfer-Encoding: 8bit\n"
"Plural-Forms: nplurals=1; plural=0;\n"
"Generated-By: Babel 2.9.1\n"
"X-Generator: Poedit 3.0.1\n"

#: ../../docs/schema_cache.rst:4
msgid "Schema Cache"
msgstr "Schema 缓存"

#: ../../docs/schema_cache.rst:6
msgid ""
"Certain PostgREST features require metadata from the database schema. "
"Getting this metadata requires executing expensive queries, so in order "
"to avoid repeating this work, PostgREST uses a schema cache."
msgstr ""
"某些 PostgREST 功能依赖数据库 Schema 的元数据。获取元数据需要执行代价高昂"
"的查询，所以为了避免重复这项工作，PostgREST 使用了 Schema 缓存。"

#: ../../docs/schema_cache.rst:10
msgid "Feature"
msgstr "功能"

#: ../../docs/schema_cache.rst:10
msgid "Required Metadata"
msgstr "所需元数据"

#: ../../docs/schema_cache.rst:12
msgid ":ref:`resource_embedding`"
msgstr ":ref:`resource_embedding`"

#: ../../docs/schema_cache.rst:12
msgid "Foreign key constraints"
msgstr "外键约束"

#: ../../docs/schema_cache.rst:14
msgid ":ref:`Stored Functions <s_procs>`"
msgstr ":ref:`存储过程 <s_procs>`"

#: ../../docs/schema_cache.rst:14
msgid ""
"Function signature (parameters, return type, volatility and `overloading "
"<https://www.postgresql.org/docs/current/xfunc-overload.html>`_)"
msgstr ""
"函数签名（参数、返回类型、波动和 `重载 <https://www.postgresql.org/docs/"
"current/xfunc-overload.html>`_）"

#: ../../docs/schema_cache.rst:17
#, fuzzy
msgid ":ref:`Upserts <upsert>`"
msgstr ":ref:`更新插入 <upsert>`"

#: ../../docs/schema_cache.rst:17
msgid "Primary keys"
msgstr "主键"

#: ../../docs/schema_cache.rst:19
msgid ":ref:`Insertions <insert_update>`"
msgstr ":ref:`插入 <insert_update>`"

#: ../../docs/schema_cache.rst:19
#, fuzzy
msgid "Primary keys (optional: only if the Location header is requested)"
msgstr "主键（可选：only if the Location header is requested）"

#: ../../docs/schema_cache.rst:21
msgid ":ref:`OPTIONS requests <options_requests>`"
msgstr ":ref:`OPTIONS 请求 <options_requests>`"

#: ../../docs/schema_cache.rst:21
msgid "View INSTEAD OF TRIGGERS and primary keys"
msgstr ""

#: ../../docs/schema_cache.rst:23
msgid ":ref:`open-api`"
msgstr ":ref:`open-api`"

#: ../../docs/schema_cache.rst:23
msgid "Table columns, primary keys and foreign keys"
msgstr "列、主键和外键"

#: ../../docs/schema_cache.rst:25
msgid "View columns and INSTEAD OF TRIGGERS"
msgstr ""

#: ../../docs/schema_cache.rst:27
msgid "Function signature"
msgstr "函数签名"

#: ../../docs/schema_cache.rst:31
msgid "The Stale Schema Cache"
msgstr "失效的 Schema 缓存"

#: ../../docs/schema_cache.rst:33
msgid ""
"When you make changes on the metadata mentioned above, the schema cache "
"will turn stale on a running PostgREST. Future requests that use the "
"above features will need the :ref:`schema cache to be reloaded "
"<schema_reloading>`; otherwise, you'll get an error instead of the "
"expected result."
msgstr ""

#: ../../docs/schema_cache.rst:35
msgid ""
"For instance, let's see what would happen if you have a stale schema "
"cache for foreign key relationships and function signatures."
msgstr ""

#: ../../docs/schema_cache.rst:40
msgid "Stale Foreign Key Relationships"
msgstr "失效的外键关系"

#: ../../docs/schema_cache.rst:42
msgid ""
"Suppose you add a ``cities`` table to your database and define a foreign "
"key that references an existing ``countries`` table. Then, you make a "
"request to get the ``cities`` and their belonging ``countries``."
msgstr ""

#: ../../docs/schema_cache.rst:54
msgid "The result will be an error:"
msgstr ""

#: ../../docs/schema_cache.rst:63
msgid ""
"As you can see, PostgREST couldn't find the newly created foreign key in "
"the schema cache. See :ref:`schema_reloading` and :ref:"
"`auto_schema_reloading` to solve this issue."
msgstr ""

#: ../../docs/schema_cache.rst:68
msgid "Stale Function Signature"
msgstr "失效的函数签名"

#: ../../docs/schema_cache.rst:70
msgid ""
"The same issue will occur on newly created functions on a running "
"PostgREST."
msgstr ""

#: ../../docs/schema_cache.rst:96
msgid ""
"Here, PostgREST tries to find the function on the stale schema to no "
"avail. See :ref:`schema_reloading` and :ref:`auto_schema_reloading` to "
"solve this issue."
msgstr ""

#: ../../docs/schema_cache.rst:101
msgid "Schema Cache Reloading"
msgstr "Schema 缓存重新加载"

#: ../../docs/schema_cache.rst:103
msgid ""
"To reload the cache without restarting the PostgREST server, send a "
"SIGUSR1 signal to the server process."
msgstr ""

#: ../../docs/schema_cache.rst:110
msgid "For docker you can do:"
msgstr ""

#: ../../docs/schema_cache.rst:119
msgid ""
"There's no downtime when reloading the schema cache. The reloading will "
"happen on a background thread while requests keep being served."
msgstr ""

#: ../../docs/schema_cache.rst:124
msgid "Reloading with NOTIFY"
msgstr "使用 NOTIFY 重新加载"

#: ../../docs/schema_cache.rst:126
msgid ""
"There are environments where you can't send the SIGUSR1 Unix Signal "
"(like on managed containers in cloud services or on Windows systems). "
"For this reason, PostgREST also allows you to reload its schema cache "
"through PostgreSQL `NOTIFY <https://www.postgresql.org/docs/current/sql-"
"notify.html>`_ as follows:"
msgstr ""

#: ../../docs/schema_cache.rst:132
msgid ""
"The ``\"pgrst\"`` notification channel is enabled by default. For "
"configuring the channel, see :ref:`db-channel` and :ref:`db-channel-"
"enabled`."
msgstr ""

#: ../../docs/schema_cache.rst:137
msgid "Automatic Schema Cache Reloading"
msgstr "Schema 缓存自动重新加载"

#: ../../docs/schema_cache.rst:139
msgid ""
"You can do automatic schema cache reloading in a pure SQL way and forget "
"about stale schema cache errors with an `event trigger <https://www."
"postgresql.org/docs/current/event-trigger-definition.html>`_ and "
"``NOTIFY``."
msgstr ""

#: ../../docs/schema_cache.rst:157
msgid ""
"Now, whenever the ``pgrst_watch`` trigger is fired in the database, "
"PostgREST will automatically reload the schema cache."
msgstr ""

#: ../../docs/schema_cache.rst:159
msgid "To disable auto reloading, drop the trigger:"
msgstr ""

#: ../../docs/schema_cache.rst:166
msgid "Finer-Grained Event Trigger"
msgstr ""

#: ../../docs/schema_cache.rst:168
msgid ""
"You can refine the previous event trigger and only react to the events "
"relevant to the schema cache. This also prevents unnecessary reloading "
"when creating temporary tables(``CREATE TEMP TABLE``) inside functions."
msgstr ""
